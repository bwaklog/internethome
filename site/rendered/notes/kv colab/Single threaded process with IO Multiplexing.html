



 

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta
            name="description"
            content=""
        />
        <title>Single threaded process with IO Multiplexing</title>

        
        
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"></script>
        
        
        <link
            href="https://unpkg.com/nord-highlightjs@0.1.0/dist/nord.css"
            rel="stylesheet"
            type="text/css"
        />

        
        

        
        

        <link
            rel="alternate"
            type="application/atom+xml"
            title="feed"
            href="/feed.atom"
        />
        <link rel="stylesheet" href="/static/style.css" />
        
        <script src="/static/scripts/light.js" defer></script>

        
        <script
            defer
            src="https://static.cloudflareinsights.com/beacon.min.js"
            data-cf-beacon='{"token": "b16ba3a1a9d546b28b8f3dfae89358e1"}'
        ></script>
        
          

        <script defer>
            
            document.querySelectorAll("img").forEach((img) => {
                img.setAttribute("loading", "lazy");
            });
        </script>

        <link rel="icon" type="image/x-icon" href="/static/favicon.png" />
        <meta property="og:type" content="website" />
        <meta property="og:title" content="Single threaded process with IO Multiplexing" />
        <meta
            property="og:description"
            content=""
        />
        <meta
            property="og:image"
            content=""
        />

        
        <meta name="format-detection" content="telephone=no" />

        <script defer>
            hljs.highlightAll();
            hljs.addPlugin(new CopyButtonPlugin());
        </script>

        <script src="/static/scripts/nav.js"></script>
    </head>
    

<body>
    <div class="container notetype">
        




<header>
  <nav>
    <div class="navigations">
      
      
      
      
      <a class="header-element author" href="/">Aditya Hegde</a>

      
      
      
      
      
      <a class="header-element"  href="/clicks.html">Clicks</a>
      
      
      
      
      
      <a class="header-element"  href="/tags.html">Index</a>
      
      
      
    </div>
    <div class="theme-toggle-div">
      <img class="theme-toggle" alt="site logo" id="theme-toggle" class="theme-toggle" src="/static/pfp.jpeg" />
    </div>
  </nav>
  
</header>


        
        <div class="post-info">
            <h1>Single threaded process with IO Multiplexing</h1>
            <p class="post-info-author" >
                2024-04-16
                
                ~

                
                Aditya Hegde
                
            </p>
            
            

        </div>
        

        <p>Redis has taken up more of a single threaded approach. Instead of a multi thread model, where each thread handles a separate request, Redis has taken an option to exploit the speed of in memory operations, and having a different approach on fetching data.</p>
<p>Redis follows something called <em>I/O  Multiplexing</em> which produces an &quot;apparent&quot; concurrency unlike true concurrency that is achieved by multithreading the process.</p>
<figure>
<img src="/static/images/notes/network-syscall-blocks.png" alt="Diagram showing blocking calls over network">
</figure>
<p><a id="zettel-reference" href="/notes/kv colab/IO syscalls are blocking operations.html">IO syscalls are blocking operations</a>, they would make the process more inefficient rather than doing more productive work as shown above. This could be solved with a multi threaded approach, by using locking mechanisms (as seen in <a id="zettel-reference" href="/notes/kv colab/Multi threaded process with each request in a new thread.html">Multi threaded process with each request in a new thread</a>), but this wastes valuable time when we already have a connection ready to send data over</p>
<h2 id="solution-to-the-problem">Solution to the problem</h2>
<p>There can be some kind of notification mechanism for I/O movements. We can notify the server for example through a TCP connection, that it has data ready to be sent over, only then the server fires a <code>read</code> request to that particular client.</p>
<p>We are not dealing with network sys-calls like read, rather just I/O monitoring calls where we are watching the TCP connections. This achieves a single threaded process. This is the niche where <a id="zettel-reference" href="/notes/kv colab/Redis exploits in memory operation speeds.html">Redis exploits in memory operation speeds</a></p>
<figure>
<img src="/static/images/notes/notsoaccurate-repr-io-mux.png" alt="A not so accurate diagram of IO multiplexing">
</figure>

        
        
        <hr />
        <section class="notes">
            <h5>References in this note</h5>
            
            <a class="note-card" href="/notes/kv%20colab/IO%20syscalls%20are%20blocking%20operations.html">
                <div class="note-card div">
                    <p>• IO syscalls are blocking operations | 2024-04-17</p>
                    <p class="note-card desc"></p>
                </div>
            </a>
            
            <a class="note-card" href="/notes/kv%20colab/Multi%20threaded%20process%20with%20each%20request%20in%20a%20new%20thread.html">
                <div class="note-card div">
                    <p>• Multi threaded process with each request in a new thread | 2024-04-16</p>
                    <p class="note-card desc"></p>
                </div>
            </a>
            
            <a class="note-card" href="/notes/kv%20colab/Redis%20exploits%20in%20memory%20operation%20speeds.html">
                <div class="note-card div">
                    <p>• Redis exploits in memory operation speeds | 2024-04-17</p>
                    <p class="note-card desc"></p>
                </div>
            </a>
            
        </section>
        

        
<footer>
    
    <div class="footer-text">
        Rendered with <span style="color: #ff4a6a">&#10084;</span> by
        <a class="footer-element" href="https://github.com/acmpesuecc/anna"
            >anna</a
        >
        <br />
        updated on <span id="commit-date">god knows when</span> | <a id="commit-hash" class="footer-element"  href="https://github.com/bwaklog/internethome/">here</a>
    </div>
    
</footer>
<script>
    
    const repoURL = "https://api.github.com/repos/bwaklog/internethome/commits/HEAD"

    fetch(repoURL)
        .then(response => response.json())
        .then(data => {
            const latestCommitHash = data.sha.slice(0, 7);

            const commitHashElement = document.getElementById('commit-hash');
            commitHashElement.href = `https://github.com/bwaklog/internethome/tree/${latestCommitHash}`
            commitHashElement.textContent = `${latestCommitHash}`;

            console.log('Latest commit hash:', latestCommitHash);

            const commitDate = data.commit.author.date;
            const readable_date = new Date(commitDate).toDateString();
            console.log('Latest commit date:', readable_date);
            document.getElementById('commit-date').textContent = readable_date;
        })
        .catch(error => {
            console.error('Error fetching data:', error)
        });
</script>

    </div>
    </div>
    
<script>

    document.addEventListener("DOMContentLoaded", function () {
        var data_cache = null;

        var url = "/static/noteindex.json";

        fetch(url)
            .then((response) => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then((data) => {
                data_cache = data;
            })
            .catch((error) => {
                console.error(
                    "There was a problem with the fetch operation:",
                    error,
                );
            })

        document.querySelectorAll('a:not(.post-card):not(.navitem)').forEach(function (anchor) {
            anchor.addEventListener('mouseover', function (e) {
                var div = document.createElement('div');
                div.id = "hoverDiv"
                div.style.position = 'fixed';
                div.style.minWidth = '20rem';

                
                div.style.transition = 'top 0.2s, opacity 0.5s';
                div.style.opacity = 0;
                div.style.top = e.clientY - divHeight / 2 + 'px';

                div.style.left = e.clientX + 'px';
                setTimeout(function () {
                    div.style.opacity = 1;
                    div.style.top = e.clientY + 'px';
                }, 50);

                
                var divWidth = 200; 
                var divHeight = 100; 

                div.style.left = e.clientX + 'px';
                div.style.top = e.clientY + 'px';

                var left = e.clientX;
                var top = e.clientY + 150;

                
                if (left + divWidth > window.innerWidth - 200) {
                    left = window.innerWidth - divWidth - 200;
                }

                if (top + divHeight > window.innerHeight) {
                    top = window.innerHeight - divHeight;
                }

                div.style.left = left + 'px';
                div.style.top = top + 'px';

                div.style.maxWidth = '200px';
                div.style.maxHeight = '250px';


                for (key in data_cache) {
                    title = data_cache[key]["Frontmatter"]["Title"];
                    if (title == anchor.innerHTML) {
                        
                        var heading = document.createElement('h4');
                        var mdBody = document.createElement('p');
                        var BodyHTML = document.createElement('div');
                        var fileDate = document.createElement('p');
                        var filePreviewImage = document.createElement("img")

                        fileDate.className = "date"
                        filePreviewImage.loading = "lazy"

                        heading.textContent = title;
                        mdBody.textContent = data_cache[key]["MarkdownBody"];
                        fileDate.textContent = `Created on ${data_cache[key]["Frontmatter"]["Date"]}`
                        body = data_cache[key]["Body"]
                        const src = data_cache[key]["Frontmatter"]["PreviewImage"];

                        if (src != "") {
                            filePreviewImage.src = src;
                            filePreviewImage.alt = "Preview Image"
                            div.appendChild(filePreviewImage)
                        }

                        div.appendChild(heading);
                        BodyHTML.innerHTML = data_cache[key]["Body"]; 
                        div.appendChild(BodyHTML);
                        div.appendChild(fileDate);

                        document.body.appendChild(div);
                        
                    }
                }
            });

            anchor.addEventListener('mouseout', function (e) {
                var hoverDivs = document.querySelectorAll('#hoverDiv');
                
                hoverDivs.forEach(function (hoverDiv) {
                    hoverDiv.remove();
                });
            });

            anchor.addEventListener('click', function(e) {
                var hoverDivs = document.querySelectorAll('#hoverDiv');
                
                hoverDivs.forEach(function (hoverDiv) {
                    hoverDiv.remove();
                });
            })
    });




        


    });
</script>

</body>

</html>

