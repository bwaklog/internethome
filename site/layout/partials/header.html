{{define "header"}} {{ $PageData := index .DeepDataMerge.Templates .PageURL }}
{{ if eq $PageData nil }} {{ $PageData = .TemplateData }} {{ end }}

<header>
    <nav>
        <div class="navigations">
            {{if eq $PageData.CompleteURL "index.html" }} {{else}}
            <a class="header-element-author" href="/">アディ</a>
            <!-- >{{ $.DeepDataMerge.LayoutConfig.Author }}</a -->
            {{end}} {{ range $index_no, $map :=
            .DeepDataMerge.LayoutConfig.Navbar }} {{ range $key, $value := $map
            }} {{ if eq . "index" }} {{else}}
            <a class="header-element" href="/{{.}}">{{ $key }}</a>
            {{end}} {{end}} {{end}}

            <!-- <div id="search-toggle" class="search-closed">
                <p>search</p>
            </div> -->
        </div>
    </nav>
    <!-- {{template "search" .}} -->
</header>
<!-- <script>NekoType="white"</script>
<h1 id=nl><script src="https://webneko.net/n20171213.js"></script><a
href="https://webneko.net">Neko</a></h1> -->

<!-- <div id="search-header">
    {{template "search" .}}
</div> -->

<audio id="chime" src="/static/sound/beep.mp3" type="audio/mp3"></audio>

<script>
    const currentPage = window.location.pathname;
    const headerElements = document.querySelectorAll(".header-element");

    headerElements.forEach((element) => {
        const elementSrc = element.getAttribute("href"); // get src attribute of each element
        if (currentPage.includes(elementSrc)) {
            // element.classList.add('active'); // add "active" class to the matching element
            console.log(currentPage, elementSrc);
            // element.style.color = "var(--color-heading)";
            element.style.fontWeight = "600";
            console.log(currentPage, elementSrc);
        }
    });
</script>

{{end}}
